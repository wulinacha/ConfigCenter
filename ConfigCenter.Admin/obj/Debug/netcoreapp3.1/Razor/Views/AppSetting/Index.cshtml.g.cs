#pragma checksum "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "47e12d71374a2613366f39e34e9b5f0bbce16b51"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_AppSetting_Index), @"mvc.1.0.view", @"/Views/AppSetting/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\_ViewImports.cshtml"
using ConfigCenter;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\_ViewImports.cshtml"
using ConfigCenter.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
using Microsoft.AspNetCore.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
using Webdiyer.AspNetCore;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"47e12d71374a2613366f39e34e9b5f0bbce16b51", @"/Views/AppSetting/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"0e1613d04d5cb382e6afa50c4abd37af8c889049", @"/Views/_ViewImports.cshtml")]
    public class Views_AppSetting_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<PagedList<ConfigCenter.Dto.AppSettingDto>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral(@"<script type=""text/javascript"">
    var platform = '';
    var noLogin = 0;
    $(function () {
        $(""table a[class='btn btn-info']"").click(function () {
            edit($(this).attr('data-id'));
        });

        $(""table a[class='btn btn-danger']"").click(function () {
            del($(this).attr('data-id'));
        });

        $('#newplatform').click(function () {
            $('div.modal-body').html('');
            $('#add_tmpl').tmpl().appendTo('div.modal-body');
            $('#myModalLabel').text('添加');
        });
        $('input[id=lefile]').change(function () {
            $('#photoCover').val($(this).val());
        });
    });

    function edit(id) {
        $.getJSON('/AppSetting/GetAppSettingById', { ""id"": id, random: Math.random() }, function (data) {
            if (data.success) {
                $('div.modal-body').html('');
                $('#edit_tmpl').tmpl(data.data).appendTo('div.modal-body');
                $('#myModalLabel').text('修改');
    ");
            WriteLiteral(@"        } else {
                if (data.errorType == noLogin)
                    window.location.href = ""/Login"";
                else
                    alert(""获取失败"");
            }
        });
    }

    function del(id) {
        if (confirm(""确定删除吗?"")) {
            $.getJSON('/AppSetting/DeleteAppSettingById', { ""id"": id, random: Math.random() }, function (data) {
                if (data.success) {
                    window.location.reload();
                } else {
                    if (data.errorType == noLogin)
                        window.location.href = ""/Login"";
                    else
                        alert(""删除失败"");
                }
            });
        }
    }
    function save() {
        var data = $('#edit_form').serialize() || $('#form_add').serialize();
        $.post('/AppSetting/SaveAppSetting', data, function (res) {
            if (res.success) {
                window.location.reload();
            } else {
                if (data.erro");
            WriteLiteral(@"rType == noLogin)
                    window.location.href = ""/Login"";
                else
                    alert(res.message);
            }
        });
    };
    function DeleteAlllAppSetting() {
        if (confirm(""确定删除全部配置吗?"")) {
            $.post('/AppSetting/DeleteAlllAppSetting?appid=' +");
#nullable restore
#line 71 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
                                                         Write(ViewBag.appid);

#line default
#line hidden
#nullable disable
            WriteLiteral(@", null, function (res) {
                if (res.success) {
                    window.location.reload();
                } else {
                    alert(res.message);
                }
            });
        }
    }
    function UploadFile() {
        var fileObj = document.getElementById(""lefile"").files[0]; // js 获取文件对象
        var url = ""/AppSetting/Import?appid=""+");
#nullable restore
#line 82 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
                                         Write(ViewBag.appid);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"; // 接收上传文件的后台地址

        var form = new FormData(); // FormData 对象
        form.append(""appSettingFile"", fileObj); // 文件对象

        xhr = new XMLHttpRequest();  // XMLHttpRequest 对象
        xhr.open(""post"", url, true); //post方式，url为服务器请求地址，true 该参数规定请求是否异步处理。
        xhr.onload = uploadComplete; //请求完成
        xhr.onerror = uploadFailed; //请求失败
        xhr.send(form); //开始上传，发送form数据
    }
    function uploadComplete(evt) {
        //服务断接收完文件返回的结果

        var data = JSON.parse(evt.target.responseText);
        if (data.success) {
            alert(""上传成功！"");
            clearFile();
            $(""#photoCover"").val("""");
            window.location.reload();
        } else {
            alert(""上传失败,格式不正确！xx"");
        }

    }
    function clearFile() {

        var file = $(""#lefile"");

        file.after('<input id=""lefile"" type=""file"" style=""display: none;"" />');

        file.remove();
    }
    //上传失败
    function uploadFailed(evt) {
        alert(""上传失败,格式不正确！"");
    }");
            WriteLiteral("\r\n    //取消上传\r\n    function cancleUploadFile() {\r\n        xhr.abort();\r\n    }\r\n    function Export() {\r\n        window.location.href =\"/AppSetting/Export?appid=\"+");
#nullable restore
#line 124 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
                                                     Write(ViewBag.appid);

#line default
#line hidden
#nullable disable
            WriteLiteral(@";
    }
    function UploadTemple() {
        window.location.href = ""/AppSetting/Upload"";
    }
</script>
<style>
    .modal-dialog {
        padding-top: 0 !important;
    }
</style>
<ol class=""breadcrumb"">
    <li><a href=""/Login"">配置中心</a></li>
    <li class=""active"">配置列表( <a id=""newplatform"" data-toggle=""modal"" data-target=""#myModal"">添加新配置</a>)</li>
    <li>当前应用:");
#nullable restore
#line 138 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
        Write(ViewData["ProjectName"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</li>\r\n    <li>当前环境:");
#nullable restore
#line 139 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
        Write(ViewData["Evn"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</li>\r\n</ol>\r\n");
#nullable restore
#line 141 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
 using (Html.BeginForm("Index", ViewContext.RouteData.Values["Controller"].ToString(), new RouteValueDictionary { { "pageindex", "" } }, FormMethod.Get, true, ""))
{

#line default
#line hidden
#nullable disable
            WriteLiteral("    <div class=\"form-inline well well-sm\">\r\n        <span>ConfigKey:  </span><input type=\"text\" name=\"kword\"");
            BeginWriteAttribute("value", " value=\"", 4897, "\"", 4961, 1);
#nullable restore
#line 144 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
WriteAttributeValue("", 4905, _httpContextAccessor.HttpContext.Request.Query["kword"], 4905, 56, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" style=\"width: 120px\" class=\"form-control\" />\r\n        <input type=\"hidden\" name=\"appId\"");
            BeginWriteAttribute("value", " value=\"", 5050, "\"", 5114, 1);
#nullable restore
#line 145 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
WriteAttributeValue("", 5058, _httpContextAccessor.HttpContext.Request.Query["appId"], 5058, 56, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@" />
        <input type=""submit"" value=""搜索(S)"" accesskey=""S"" class=""btn btn-default"" />
        <input type=""button"" value=""导出配置"" onclick=""Export()"" accesskey=""S"" class=""btn btn-primary"" />
        <input id=""lefile"" type=""file"" style=""display: none;"" />
        <input type=""text"" id=""photoCover"" placeholder=""FileUpload"" style=""width: 120px"" class=""form-control"" />
        <input type=""button"" value=""上传"" onclick=""$('input[id=lefile]').click();"" class=""btn btn-primary"" />
        <input type=""button"" value=""提交"" class=""btn btn-primary"" onclick=""UploadFile();"" />
        <input type=""button"" onclick=""UploadTemple()"" value=""下载模板"" accesskey=""S"" class=""btn btn-primary"" />
    </div>
");
#nullable restore
#line 154 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
}

#line default
#line hidden
#nullable disable
#nullable restore
#line 155 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
Write(Html.Partial("_AppTable", Model));

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
#nullable restore
#line 157 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
Write(Html.Pager(Model, new PagerOptions { HorizontalAlign = "right", CssClass = "pagination", CurrentPagerItemTemplate = "<li class=\"active\"><a href=\"#\">{0}</a></li>", DisabledPagerItemTemplate = "<li class=\"disabled\"><a>{0}</a></li>", PagerItemTemplate = "<li>{0}&nbsp;</li>", Id = "bootstrappager" }));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"

<!-- Modal -->
<div class=""modal fade"" id=""myModal"" tabindex=""-1"" role=""dialog"" aria-labelledby=""myModalLabel"" aria-hidden=""true"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-hidden=""true"">&times;</button>
                <h4 class=""modal-title"" id=""myModalLabel"">Modal title</h4>
            </div>
            <div class=""modal-body"">
            </div>
        </div>
    </div>
</div>

<script type=""text/x-jquery-tmpl"" id=""add_tmpl"">
    <form id=""form_add"" class=""form-horizontal"" role=""form"">
        <div class=""form-group"">
            <label class=""col-sm-3 control-label"">配置名称</label>
            <div class=""col-xs-8"">
                <input type=""text"" class=""form-control"" name=""ConfigKey"" value="""" placeholder=""配置名称"">
            </div>
        </div>
        <div class=""form-group"">
            <label class=""col-sm-3 control-label"">配置值</la");
            WriteLiteral("bel>\r\n            <div class=\"col-xs-8\">\r\n                <textarea class=\"form-control\" rows=\"16\" placeholder=\"配置值\" name=\"ConfigValue\"></textarea>\r\n");
            WriteLiteral("            </div>\r\n        </div>\r\n");
            WriteLiteral("        <div class=\"form-group\">\r\n            <div class=\"col-sm-offset-2 col-sm-10\">\r\n                <button type=\"button\" class=\"btn btn-primary\" onclick=\"save();\">添加</button>\r\n                <input type=\"hidden\" name=\"AppId\" value=\"");
#nullable restore
#line 200 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
                                                    Write(_httpContextAccessor.HttpContext.Request.Query["appId"]);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""" />
            </div>
        </div>
    </form>
</script>

<script type=""text/x-jquery-tmpl"" id=""edit_tmpl"">
    <form id=""edit_form"" class=""form-horizontal"" role=""form"">
        <div class=""form-group"">
            <label class=""col-sm-3 control-label"">配置名称</label>
            <div class=""col-xs-8"">
                <input type=""text"" class=""form-control"" name=""ConfigKey"" value=""${configKey}"" placeholder=""配置名称"">
            </div>
        </div>
        <div class=""form-group"">
            <label class=""col-sm-3 control-label"">配置值</label>
            <div class=""col-xs-8"">
                <textarea class=""form-control"" rows=""16"" placeholder=""配置值"" name=""ConfigValue"">${configValue}</textarea>
");
            WriteLiteral("            </div>\r\n        </div>\r\n");
            WriteLiteral(@"        <div class=""form-group"">
            <div class=""col-sm-offset-2 col-sm-10"">
                <button type=""button"" class=""btn btn-primary"" onclick=""save();"">提交</button>
                <input type=""hidden"" name=""Id"" value=""${id}"" />
                <input type=""hidden"" name=""AppId"" value=""");
#nullable restore
#line 234 "D:\Project\基础框架\configcenter\ConfigCenter.Admin\Views\AppSetting\Index.cshtml"
                                                    Write(_httpContextAccessor.HttpContext.Request.Query["appId"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" />\r\n            </div>\r\n        </div>\r\n    </form>\r\n</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public Microsoft.AspNetCore.Http.IHttpContextAccessor _httpContextAccessor { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<PagedList<ConfigCenter.Dto.AppSettingDto>> Html { get; private set; }
    }
}
#pragma warning restore 1591
